{{- $secrets := readFile "./secrets.yaml" | fromYaml -}}

releases:
  - name: metrics-server
    chart: metrics-server/metrics-server
    namespace: kube-system
    version: 3.12.1
    labels:
      purpose: monitoring
    values:
      - ./values/metrics-server.yaml

  - name: nri-bundle
    installed: false
    chart: newrelic/nri-bundle
    namespace: monitoring
    version: 5.0.85
    labels:
      purpose: monitoring
    values:
      - ./values/nri-bundle.yaml
      - {{- $secrets.newrelic | toYaml | nindent 8 }}

  - name: openobserve-collector
    # installed: false
    chart: openobserve/openobserve-collector
    namespace: monitoring
    version: 0.3.8
    labels:
      purpose: monitoring
    values:
      - {{- $secrets.openobserveCollector | toYaml | nindent 8 }}

  - name: opentelemetry-operator
    chart: open-telemetry/opentelemetry-operator
    namespace: monitoring
    version: 0.64.2
    labels:
      purpose: monitoring
    values:
      - ./values/opentelemetry-operator.yaml

  - name: prometheus-stack
    chart: prometheus-community/kube-prometheus-stack
    namespace: monitoring
    version: 61.3.1
    labels:
      purpose: monitoring
    values:
      - ./values/prometheus-stack.yaml
      - {{- $secrets.prometheusStack | toYaml | nindent 8 }}
